# å¦‚ä½•é€‚é…æ–°æ•°æ®æ ¼å¼

## ğŸ“ åœºæ™¯è¯´æ˜

å½“ä½ æœ‰æ–°çš„æ•°æ®æºï¼Œæˆ–éœ€è¦æ·»åŠ /åˆ é™¤å­—æ®µæ—¶ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œã€‚

## ğŸ¯ æ­¥éª¤1ï¼šåˆ†æä½ çš„æ•°æ®æ ¼å¼

### ç¤ºä¾‹æ•°æ®Aï¼ˆç°æœ‰æ ¼å¼ï¼‰
```json
{
  "home-others-chair-001": {
    "category": "chair",
    "description": "A modern chair",
    "material": "wood",
    "dimensions": "0.6 * 0.6 * 0.8",
    "placement": ["OnFloor"]
  }
}
```

### ç¤ºä¾‹æ•°æ®Bï¼ˆæ–°æ ¼å¼ï¼‰
```json
{
  "furniture-chair-001": {
    "object_type": "åŠå…¬æ¤…",
    "detailed_desc": "é»‘è‰²çš®è´¨åŠå…¬æ¤…",
    "main_material": "çš®é©+é‡‘å±",
    "size_info": "60x60x100 cm",
    "weight_kg": 15.5,
    "color": "é»‘è‰²",
    "brand": "å®œå®¶",
    "price": 599,
    "suitable_places": ["åŠå…¬å®¤", "ä¹¦æˆ¿"]
  }
}
```

## ğŸ”§ æ­¥éª¤2ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶

### æ–¹æ³•1ï¼šä¿®æ”¹ç°æœ‰ config.py

æ‰“å¼€ `config.py`ï¼Œæ‰¾åˆ° `FIELD_CONFIG` éƒ¨åˆ†ï¼Œä¿®æ”¹ä¸ºï¼š

```python
FIELD_CONFIG = [
    # ğŸ‘‡ æ¯ä¸ªå­—æ®µçš„é…ç½®
    {
        "key": "object_type",          # â­ é‡è¦ï¼šå¯¹åº”æ•°æ®ä¸­çš„å­—æ®µå
        "label": "ç‰©ä½“ç±»å‹",            # ç•Œé¢ä¸Šæ˜¾ç¤ºçš„æ ‡ç­¾
        "type": "textbox",             # ç»„ä»¶ç±»å‹ï¼ˆç›®å‰åªæ”¯æŒtextboxï¼‰
        "lines": 1,                    # æ–‡æœ¬æ¡†è¡Œæ•°
        "has_checkbox": True,          # æ˜¯å¦æœ‰å‹¾é€‰æ¡†
        "placeholder": "ä¾‹å¦‚: åŠå…¬æ¤…",  # å ä½ç¬¦æç¤º
        "flex": 1                      # é«˜åº¦æƒé‡ï¼ˆæ•°å­—è¶Šå¤§å ç”¨ç©ºé—´è¶Šå¤šï¼‰
    },
    {
        "key": "detailed_desc",
        "label": "è¯¦ç»†æè¿°",
        "type": "textbox",
        "lines": 3,                    # 3è¡Œæ–‡æœ¬æ¡†
        "has_checkbox": True,
        "placeholder": "æè¿°ç‰©ä½“ç‰¹å¾",
        "flex": 2                      # å æ®2å€ç©ºé—´
    },
    # ... ç»§ç»­æ·»åŠ å…¶ä»–å­—æ®µ
]
```

### æ–¹æ³•2ï¼šä½¿ç”¨è‡ªå®šä¹‰é…ç½®ï¼ˆæ¨èï¼‰

```bash
# 1. å¤‡ä»½åŸé…ç½®
cp config.py config.py.backup

# 2. å¤åˆ¶ç¤ºä¾‹é…ç½®
cp config_custom_example.py config.py

# 3. ç¼–è¾‘ config.pyï¼Œä¿®æ”¹å­—æ®µé…ç½®
nano config.py  # æˆ–ç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨
```

## ğŸ“Š æ­¥éª¤3ï¼šç†è§£å­—æ®µé…ç½®å‚æ•°

### å¿…å¡«å‚æ•°

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `key` | **å­—æ®µæ ‡è¯†**ï¼ˆå¯¹åº”æ•°æ®ä¸­çš„å­—æ®µåï¼‰ | `"object_type"` |
| `label` | **æ˜¾ç¤ºæ ‡ç­¾**ï¼ˆç•Œé¢ä¸Šæ˜¾ç¤ºçš„æ–‡å­—ï¼‰ | `"ç‰©ä½“ç±»å‹"` |
| `type` | **ç»„ä»¶ç±»å‹**ï¼ˆç›®å‰åªæ”¯æŒ `"textbox"`ï¼‰ | `"textbox"` |

### å¯é€‰å‚æ•°

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|------|------|--------|------|
| `lines` | æ–‡æœ¬æ¡†è¡Œæ•° | 1 | `3` |
| `has_checkbox` | æ˜¯å¦æœ‰å‹¾é€‰æ¡† | False | `True` |
| `placeholder` | å ä½ç¬¦æç¤º | "" | `"è¯·è¾“å…¥..."` |
| `flex` | é«˜åº¦æƒé‡ | 1 | `2` (å 2å€ç©ºé—´) |
| `process` | ç‰¹æ®Šå¤„ç†ç±»å‹ | None | `"array_to_string"` |

### process å¤„ç†ç±»å‹

| ç±»å‹ | ä½œç”¨ | ç¤ºä¾‹ |
|------|------|------|
| `None` | ä¸å¤„ç† | `"chair"` â†’ `"chair"` |
| `"array_to_string"` | æ•°ç»„â†”å­—ç¬¦ä¸² | `["A", "B"]` â†” `"A, B"` |
| `"json"` | å¯¹è±¡â†”JSONå­—ç¬¦ä¸² | `{a:1}` â†” `'{"a":1}'` |

## ğŸ¨ æ­¥éª¤4ï¼šå¸¸è§é…ç½®åœºæ™¯

### åœºæ™¯1ï¼šç®€å•æ–‡æœ¬å­—æ®µ

```python
{
    "key": "brand",           # æ•°æ®ä¸­çš„å­—æ®µå
    "label": "å“ç‰Œ",          # æ˜¾ç¤ºåç§°
    "type": "textbox",
    "lines": 1,
    "has_checkbox": True,
    "placeholder": "ä¾‹å¦‚: å®œå®¶",
    "flex": 1
}
```

### åœºæ™¯2ï¼šå¤šè¡Œæ–‡æœ¬ï¼ˆæè¿°ï¼‰

```python
{
    "key": "description",
    "label": "è¯¦ç»†æè¿°",
    "type": "textbox",
    "lines": 5,              # 5è¡Œé«˜
    "has_checkbox": True,
    "flex": 3                # å 3å€ç©ºé—´
}
```

### åœºæ™¯3ï¼šæ•°ç»„å­—æ®µï¼ˆè‡ªåŠ¨å¤„ç†ï¼‰

```python
{
    "key": "tags",
    "label": "æ ‡ç­¾",
    "type": "textbox",
    "lines": 1,
    "has_checkbox": True,
    "placeholder": "ç”¨é€—å·åˆ†éš”",
    "flex": 1,
    "process": "array_to_string"  # è‡ªåŠ¨è½¬æ¢ ["a","b"] â†” "a, b"
}
```

### åœºæ™¯4ï¼šä¸éœ€è¦å‹¾é€‰æ¡†

```python
{
    "key": "price",
    "label": "ä»·æ ¼",
    "type": "textbox",
    "lines": 1,
    "has_checkbox": False,   # ä¸æ˜¾ç¤ºå‹¾é€‰æ¡†
    "flex": 1
}
```

## ğŸ”„ æ­¥éª¤5ï¼šå¤„ç†å­—æ®µåä¸åŒ¹é…

å¦‚æœä½ çš„æ•°æ®å­—æ®µåå’Œä½ æƒ³æ˜¾ç¤ºçš„åå­—ä¸ä¸€æ ·ï¼š

```python
# æ•°æ®æ ¼å¼
{
  "desc": "è¿™æ˜¯æè¿°",      # æ•°æ®ä¸­å« "desc"
  "mat": "æœ¨å¤´"            # æ•°æ®ä¸­å« "mat"
}

# é…ç½®æ–¹å¼1ï¼šåœ¨ FIELD_CONFIG ä¸­ä½¿ç”¨åŸå­—æ®µå
FIELD_CONFIG = [
    {
        "key": "desc",       # ä½¿ç”¨æ•°æ®ä¸­çš„å®é™…å­—æ®µå
        "label": "è¯¦ç»†æè¿°",  # ä½†æ˜¾ç¤ºä¸º"è¯¦ç»†æè¿°"
        ...
    }
]

# é…ç½®æ–¹å¼2ï¼šä½¿ç”¨ FIELD_MAPPING æ˜ å°„
FIELD_CONFIG = [
    {
        "key": "description",  # ä½ æƒ³ç”¨çš„å­—æ®µå
        "label": "è¯¦ç»†æè¿°",
        ...
    }
]

FIELD_MAPPING = {
    "description": "desc",  # æ˜ å°„å…³ç³»ï¼šæ˜¾ç¤ºå­—æ®µ â†’ æ•°æ®å­—æ®µ
    "material": "mat"
}
```

## ğŸ“ æ­¥éª¤6ï¼šæ›´æ–°è·¯å¾„é…ç½®

```python
PATH_CONFIG = {
    "data_file": "/å®é™…è·¯å¾„/åˆ°/ä½ çš„/data.jsonl",  # ğŸ‘ˆ ä¿®æ”¹è¿™é‡Œ
    "base_path": "/å›¾ç‰‡/åŸºç¡€/è·¯å¾„",               # ğŸ‘ˆ ä¿®æ”¹è¿™é‡Œ
    "gif_filename_pattern": "{model_id}.gif",     # å›¾ç‰‡æ–‡ä»¶åæ ¼å¼
}
```

## âœ… æ­¥éª¤7ï¼šæµ‹è¯•é…ç½®

```bash
# 1. æµ‹è¯•æ¨¡å—æ˜¯å¦æ­£å¸¸
cd modular_version
python test_modules.py

# 2. å¯åŠ¨ç¨‹åºæµ‹è¯•
./run.sh --port 7801

# 3. åœ¨æµè§ˆå™¨è®¿é—®
http://localhost:7801
```

## ğŸ¯ å®Œæ•´ç¤ºä¾‹ï¼šä»å¤´é€‚é…æ–°æ•°æ®

å‡è®¾ä½ æœ‰è¿™æ ·çš„æ•°æ®ï¼š

```json
{
  "product-001": {
    "name": "çº¢æœ¨ä¹¦æ¡Œ",
    "desc": "å®æœ¨ä¹¦æ¡Œï¼Œå¸¦æŠ½å±‰",
    "material": "çº¢æœ¨",
    "price": 2999,
    "colors": ["æ£•è‰²", "æ·±æ£•"],
    "tags": ["å®¶å…·", "ä¹¦æˆ¿"]
  }
}
```

### å®Œæ•´é…ç½®æ–‡ä»¶

```python
# ========== config.py ==========

FIELD_CONFIG = [
    {
        "key": "name",
        "label": "äº§å“åç§°",
        "type": "textbox",
        "lines": 1,
        "has_checkbox": True,
        "flex": 1
    },
    {
        "key": "desc",
        "label": "äº§å“æè¿°",
        "type": "textbox",
        "lines": 3,
        "has_checkbox": True,
        "flex": 2
    },
    {
        "key": "material",
        "label": "æè´¨",
        "type": "textbox",
        "lines": 1,
        "has_checkbox": True,
        "flex": 1
    },
    {
        "key": "price",
        "label": "ä»·æ ¼",
        "type": "textbox",
        "lines": 1,
        "has_checkbox": True,
        "placeholder": "å•ä½ï¼šå…ƒ",
        "flex": 1
    },
    {
        "key": "colors",
        "label": "å¯é€‰é¢œè‰²",
        "type": "textbox",
        "lines": 1,
        "has_checkbox": True,
        "placeholder": "ç”¨é€—å·åˆ†éš”",
        "flex": 1,
        "process": "array_to_string"  # è‡ªåŠ¨å¤„ç†æ•°ç»„
    },
    {
        "key": "tags",
        "label": "æ ‡ç­¾",
        "type": "textbox",
        "lines": 1,
        "has_checkbox": True,
        "placeholder": "ç”¨é€—å·åˆ†éš”",
        "flex": 1,
        "process": "array_to_string"  # è‡ªåŠ¨å¤„ç†æ•°ç»„
    }
]

FIELD_MAPPING = {
    "name": "name",
    "desc": "desc",
    "material": "material",
    "price": "price",
    "colors": "colors",
    "tags": "tags"
}

PATH_CONFIG = {
    "data_file": "/path/to/products.jsonl",
    "base_path": "/path/to/images",
    "gif_filename_pattern": "{model_id}.jpg",
}
```

## ğŸ” è°ƒè¯•æŠ€å·§

### æ£€æŸ¥æ•°æ®æ˜¯å¦æ­£ç¡®åŠ è½½

åœ¨ `main.py` å¯åŠ¨åï¼ŒæŸ¥çœ‹ç»ˆç«¯è¾“å‡ºï¼š

```
============================================================
ğŸ‘¤ å½“å‰ç”¨æˆ·: default_user
ğŸ“‚ åŠ è½½çš„æ•°æ®æ–‡ä»¶: /path/to/data.jsonl
ğŸ“Š æ•°æ®æ€»æ•°: 100 ä¸ªæ¨¡å‹
ğŸ‘ï¸  å¯è§æ•°æ®: 100 ä¸ªæ¨¡å‹
ğŸ”‘ ç¤ºä¾‹: ['product-001', 'product-002', ...]
============================================================
```

### æ£€æŸ¥å­—æ®µæ˜¯å¦æ˜¾ç¤º

å¯åŠ¨åï¼Œåœ¨ç•Œé¢ä¸Šæ£€æŸ¥ï¼š
- âœ“ æ‰€æœ‰å­—æ®µéƒ½æ˜¾ç¤ºäº†å—ï¼Ÿ
- âœ“ å­—æ®µé¡ºåºå¯¹å—ï¼Ÿ
- âœ“ å‹¾é€‰æ¡†åœ¨éœ€è¦çš„åœ°æ–¹å—ï¼Ÿ
- âœ“ æ•°æ®èƒ½æ­£ç¡®åŠ è½½å—ï¼Ÿ

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q1: æ·»åŠ äº†å­—æ®µä½†æ²¡æ˜¾ç¤ºï¼Ÿ
A: æ£€æŸ¥ `FIELD_CONFIG` è¯­æ³•æ˜¯å¦æ­£ç¡®ï¼Œç‰¹åˆ«æ˜¯é€—å·å’Œå¼•å·

### Q2: æ•°æ®æ˜¾ç¤ºä¸ºç©ºï¼Ÿ
A: æ£€æŸ¥ `FIELD_MAPPING` æ˜¯å¦æ­£ç¡®æ˜ å°„äº†å­—æ®µå

### Q3: æ•°ç»„å­—æ®µæ˜¾ç¤ºä¸º `["a","b"]` è€Œä¸æ˜¯ `a, b`ï¼Ÿ
A: æ·»åŠ  `"process": "array_to_string"` å‚æ•°

### Q4: ä¿®æ”¹äº†é…ç½®ä½†æ²¡ç”Ÿæ•ˆï¼Ÿ
A: éœ€è¦é‡å¯ç¨‹åºï¼ˆCtrl+C åé‡æ–°è¿è¡Œï¼‰

## ğŸ“š æ›´å¤šç¤ºä¾‹

æŸ¥çœ‹ä»¥ä¸‹æ–‡ä»¶è·å–æ›´å¤šç¤ºä¾‹ï¼š
- `config.py` - é»˜è®¤é…ç½®
- `config_example.py` - å„ç§é…ç½®ç¤ºä¾‹
- `config_custom_example.py` - å®Œæ•´è‡ªå®šä¹‰ç¤ºä¾‹

---

**æç¤º**ï¼šä¿®æ”¹é…ç½®å‰å…ˆå¤‡ä»½ `config.py`ï¼

